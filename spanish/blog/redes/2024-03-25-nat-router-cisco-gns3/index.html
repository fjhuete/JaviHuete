<!doctype html>
<html
  itemscope
  class=""
  lang="es-Es"
  itemtype="http://schema.org/WebPage">
  <head><script src="/livereload.js?mindelay=10&amp;v=2&amp;port=1313&amp;path=livereload" data-no-instant defer></script>
    
    <meta charset="utf-8" />


<meta
  name="viewport"
  content="width=device-width, initial-scale=1, maximum-scale=5" />


<meta name="theme-name" content="hugoplate" />















<link rel="shortcut icon" href="/images/favicon_hu4028665881880111129.png" type="image/x-icon">
<link rel="icon" href="/images/favicon_hu4028665881880111129.png" type="image/x-icon">
<link rel="icon" type="image/png" sizes="48x48" href="/images/favicon_hu5217499384461932560.png">
<link rel="icon" type="image/png" sizes="96x96" href="/images/favicon_hu4028665881880111129.png">
<link rel="apple-touch-icon" sizes="144x144" href="/images/favicon_hu2974018437732034086.png">








<link rel="manifest" href="/manifest.webmanifest" />
<meta
  name="msapplication-TileColor"
  content="#ddd" />
<meta
  name="theme-color"
  content="#ffffff" />






















  <base href="//localhost:1313/spanish/blog/redes/2024-03-25-nat-router-cisco-gns3/" />







  


<title>Configuración NAT en routers Cisco en GNS3</title>















  <meta
    name="keywords"
    content="Boilerplate, Hugo" />




<meta
  name="description"
  content="Hugo &amp; Tailwindcss Starter" />



  <meta name="author" content="zeon.studio" />






  












  

  
  
  


  
  
    
    
      
    

    


    
    


    
    
      
      
      
        <meta property="og:image" content="//localhost:1313/images/og-image.png" />
        <meta name="twitter:image" content="//localhost:1313/images/og-image.png" />
        <meta
          name="twitter:card"
          content="summary_large_image" />
      
      
      <meta property="og:image:width" content="900" />
      <meta property="og:image:height" content="600" />
    


    
    <meta
      property="og:image:type"
      content="image/.png" />
  


  





<meta property="og:title" content="Configuración NAT en routers Cisco en GNS3" />
<meta property="og:description" content="Hugo &amp; Tailwindcss Starter" />
<meta property="og:type" content="website" />
<meta property="og:url" content="//localhost:1313/spanish/blog/redes/2024-03-25-nat-router-cisco-gns3/" />


<meta name="twitter:title" content="Configuración NAT en routers Cisco en GNS3" />
<meta name="twitter:description" content="Hugo &amp; Tailwindcss Starter" />


  <meta name="twitter:site" content="@zeon_studio" />


  <meta name="twitter:creator" content="@zeon.studio" />



















<script>
  let indexURL = "//localhost:1313/searchindex.json";
  let includeSectionsInSearch = ["blog"];
  let search_no_results = "0 results for";
  let search_initial_message = "";
</script>























    
    
<meta http-equiv="x-dns-prefetch-control" content="on" />
<link rel="preconnect" href="https://use.fontawesome.com" crossorigin />
<link rel="preconnect" href="//cdnjs.cloudflare.com" />
<link rel="preconnect" href="//www.googletagmanager.com" />
<link rel="preconnect" href="//www.google-analytics.com" />
<link rel="dns-prefetch" href="https://use.fontawesome.com" />
<link rel="dns-prefetch" href="//ajax.googleapis.com" />
<link rel="dns-prefetch" href="//cdnjs.cloudflare.com" />
<link rel="dns-prefetch" href="//www.googletagmanager.com" />
<link rel="dns-prefetch" href="//www.google-analytics.com" />
<link rel="dns-prefetch" href="//fonts.googleapis.com" />
<link rel="dns-prefetch" href="//connect.facebook.net" />
<link rel="dns-prefetch" href="//platform.linkedin.com" />
<link rel="dns-prefetch" href="//platform.twitter.com" />




<link rel="preconnect" href="https://fonts.googleapis.com" />
<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
<script>
  (function () {
    const googleFont = document.createElement("link");
    googleFont.href = "https://fonts.googleapis.com/css2?family=Heebo:wght@400;600&family=Signika:wght@500;700&display=swap";
    googleFont.type = "text/css";
    googleFont.rel = "stylesheet";
    document.head.appendChild(googleFont);
  })();
</script>





  
    
      
    
  

  
    
      
    
  

  
    
      
    
  

  
    
      
    
  

  
    
      
    
  











  
  



<link
  href="/css/style.css"
  integrity=""
  rel="stylesheet" />


<link
  defer
  async
  rel="stylesheet"
  href="/css/style-lazy.css"
  integrity=""
  media="print"
  onload="this.media='all'; this.onload=null;" />


  </head>

  <body>
    
    
      





      
      <div
  class="fixed left-0 top-0 z-50 flex w-[30px] items-center justify-center bg-gray-200 py-[2.5px] text-[12px] uppercase text-black sm:bg-red-200 md:bg-yellow-200 lg:bg-green-200 xl:bg-blue-200 2xl:bg-pink-200">
  <span class="block sm:hidden">all</span>
  <span class="hidden sm:block md:hidden">sm</span>
  <span class="hidden md:block lg:hidden">md</span>
  <span class="hidden lg:block xl:hidden">lg</span>
  <span class="hidden xl:block 2xl:hidden">xl</span>
  <span class="hidden 2xl:block">2xl</span>
</div>

    


    
    





    
    <header
  class="header sticky top-0 z-30">
  <nav class="navbar container">
    
    <div class="order-0">
      
      <a class="navbar-brand block" href="/">
        















  









  
  
  


  
  
    
    
  


  
  
      
      
    
    
    
    
    
    
  
  

  
  
    
    
      
      


      
      
        
        
        
        

        
        
        
      
      
    
  
  

  
    <img
      fetchpriority="high"
      decoding="async"
      class="img img-light"
      width="160"
      height="32"
      src="/images/logo_hu4114262549785978686.webp"
      alt="Javi Huete"
      onerror="this.onerror=null;this.src='\/images\/logo_hu7137767845088484273.png';" />

    <img
      fetchpriority="high"
      decoding="async"
      class="img img-dark"
      width="160"
      height="32"
      src="/images/logo-darkmode_hu8742296558546396051.webp"
      alt="Javi Huete"
      onerror="this.onerror=null;this.src='\/images\/logo-darkmode_hu4471933895487503573.png';" />
  
  


      </a>
    </div>
    
    <input id="nav-toggle" type="checkbox" class="hidden" />
    <label
      for="nav-toggle"
      class="order-3 cursor-pointer flex items-center lg:hidden text-dark dark:text-white lg:order-1">
      <svg id="show-button" class="h-6 fill-current block" viewBox="0 0 20 20">
        <title>Menu Open</title>
        <path d="M0 3h20v2H0V3z m0 6h20v2H0V9z m0 6h20v2H0V0z"></path>
      </svg>
      <svg id="hide-button" class="h-6 fill-current hidden" viewBox="0 0 20 20">
        <title>Menu Close</title>
        <polygon
          points="11 9 22 9 22 11 11 11 11 22 9 22 9 11 -2 11 -2 9 9 9 9 -2 11 -2"
          transform="rotate(45 10 10)"></polygon>
      </svg>
    </label>
    

    
    <ul
      id="nav-menu"
      class="navbar-nav order-3 hidden lg:flex w-full pb-6 lg:order-1 lg:w-auto lg:space-x-2 lg:pb-0 xl:space-x-8">
      
      
      
    </ul>

    <div class="order-1 ml-auto flex items-center md:order-2 lg:ml-0">
      
        
          <button
            aria-label="search"
            
            class="border-border text-dark hover:text-primary dark:border-darkmode-border mr-5 inline-block border-r pr-5 text-xl dark:text-white dark:hover:text-darkmode-primary"
            
            data-target="search-modal">
            <i class="fa-solid fa-search"></i>
          </button>
        
      

      









      


  <div class="theme-switcher mr-5 hidden">
    <input id="theme-switcher" data-theme-switcher type="checkbox" />
    <label for="theme-switcher">
      <span class="sr-only">theme switcher</span>
      <span>
        
        <svg
          class="absolute left-1/2 top-1/2 -translate-x-1/2 -translate-y-1/2 z-10 opacity-100 dark:opacity-0"
          viewBox="0 0 56 56"
          fill="#fff"
          height="16"
          width="16">
          <path
            d="M30 4.6c0-1-.9-2-2-2a2 2 0 0 0-2 2v5c0 1 .9 2 2 2s2-1 2-2Zm9.6 9a2 2 0 0 0 0 2.8c.8.8 2 .8 2.9 0L46 13a2 2 0 0 0 0-2.9 2 2 0 0 0-3 0Zm-26 2.8c.7.8 2 .8 2.8 0 .8-.7.8-2 0-2.9L13 10c-.7-.7-2-.8-2.9 0-.7.8-.7 2.1 0 3ZM28 16a12 12 0 0 0-12 12 12 12 0 0 0 12 12 12 12 0 0 0 12-12 12 12 0 0 0-12-12Zm23.3 14c1.1 0 2-.9 2-2s-.9-2-2-2h-4.9a2 2 0 0 0-2 2c0 1.1 1 2 2 2ZM4.7 26a2 2 0 0 0-2 2c0 1.1.9 2 2 2h4.9c1 0 2-.9 2-2s-1-2-2-2Zm37.8 13.6a2 2 0 0 0-3 0 2 2 0 0 0 0 2.9l3.6 3.5a2 2 0 0 0 2.9 0c.8-.8.8-2.1 0-3ZM10 43.1a2 2 0 0 0 0 2.9c.8.7 2.1.8 3 0l3.4-3.5c.8-.8.8-2.1 0-2.9-.8-.8-2-.8-2.9 0Zm20 3.4c0-1.1-.9-2-2-2a2 2 0 0 0-2 2v4.9c0 1 .9 2 2 2s2-1 2-2Z" />
        </svg>
        
        <svg
          class="absolute left-1/2 top-1/2 -translate-x-1/2 -translate-y-1/2 z-10 opacity-0 dark:opacity-100"
          viewBox="0 0 24 24"
          fill="none"
          height="16"
          width="16">
          <path
            fill="#000"
            fill-rule="evenodd"
            clip-rule="evenodd"
            d="M8.2 2.2c1-.4 2 .6 1.6 1.5-1 3-.4 6.4 1.8 8.7a8.4 8.4 0 0 0 8.7 1.8c1-.3 2 .5 1.5 1.5v.1a10.3 10.3 0 0 1-9.4 6.2A10.3 10.3 0 0 1 3.2 6.7c1-2 2.9-3.5 4.9-4.4Z" />
        </svg>
      </span>
    </label>
  </div>

  
  <script>
    var darkMode = true;

    

    if (localStorage.getItem("theme") === "dark"){darkMode = true}
    else if (localStorage.getItem("theme") === "light"){darkMode = false}

    if (darkMode){document.documentElement.classList.add("dark")}
    else {document.documentElement.classList.remove("dark")}

    
    document.addEventListener("DOMContentLoaded", () => {
      var themeSwitch = document.querySelectorAll("[data-theme-switcher]");
      var themeSwitcherContainer = document.querySelector('.theme-switcher');

      [].forEach.call(themeSwitch, function (ts) {
        ts.checked = darkMode;
        ts.addEventListener("click", () => {
          document.documentElement.classList.toggle("dark");
          localStorage.setItem(
            "theme",
            document.documentElement.classList.contains("dark") ? "dark" : "light"
          );
        });
      });

      
      themeSwitcherContainer.classList.remove('hidden');
    });
  </script>




      
      
    </div>
  </nav>
</header>

    




  
    <div
      class="search-modal "
      aria-hidden="true"
      style="--color-primary: #121212">
      <div data-target="close-search-modal" class="search-modal-overlay"></div>
      <div
        class="search-wrapper"
        data-image="true"
        data-description="true"
        data-tags="true"
        data-categories="true">
        <div class="search-wrapper-header">
          <label for="search-modal-input" style="margin-top:-1px">
            <span class="sr-only">search icon</span>
            <svg
              xmlns="http://www.w3.org/2000/svg"
              viewBox="0 0 512 512"
              height="18"
              width="18"
              class="search-icon"
              data-type="search">
              <path
                fill="currentColor"
                d="M416 208c0 45.9-14.9 88.3-40 122.7L502.6 457.4c12.5 12.5 12.5 32.8 0 45.3s-32.8 12.5-45.3 0L330.7 376c-34.4 25.2-76.8 40-122.7 40C93.1 416 0 322.9 0 208S93.1 0 208 0S416 93.1 416 208zM208 352a144 144 0 1 0 0-288 144 144 0 1 0 0 288z" />
            </svg>
            <svg
              xmlns="http://www.w3.org/2000/svg"
              viewBox="0 0 512 512"
              height="18"
              width="18"
              class="search-reset"
              data-type="reset">
              <path
                fill="currentColor"
                d="M256 512A256 256 0 1 0 256 0a256 256 0 1 0 0 512zM175 175c9.4-9.4 24.6-9.4 33.9 0l47 47 47-47c9.4-9.4 24.6-9.4 33.9 0s9.4 24.6 0 33.9l-47 47 47 47c9.4 9.4 9.4 24.6 0 33.9s-24.6 9.4-33.9 0l-47-47-47 47c-9.4 9.4-24.6 9.4-33.9 0s-9.4-24.6 0-33.9l47-47-47-47c-9.4-9.4-9.4-24.6 0-33.9z" />
            </svg>
          </label>
          <input
            id="search-modal-input"
            type="text"
            data-search-input
            autocomplete="off"
            aria-label="Search"
            placeholder="" />
        </div>
        <div class="search-wrapper-body">
          <div class="search-result" data-search-result></div>
          <span class="search-result-empty">
            
          </span>
        </div>
        <div class="search-wrapper-footer">
          <span>
            <kbd>
              <svg
                xmlns="http://www.w3.org/2000/svg"
                width="14"
                height="14"
                fill="currentColor"
                viewBox="0 0 16 16">
                <path
                  d="M3.204 11h9.592L8 5.519 3.204 11zm-.753-.659 4.796-5.48a1 1 0 0 1 1.506 0l4.796 5.48c.566.647.106 1.659-.753 1.659H3.204a1 1 0 0 1-.753-1.659z" />
              </svg>
            </kbd>
            <kbd>
              <svg
                xmlns="http://www.w3.org/2000/svg"
                width="14"
                height="14"
                fill="currentColor"
                style="margin-top:1px;"
                viewBox="0 0 16 16">
                <path
                  d="M3.204 5h9.592L8 10.481 3.204 5zm-.753.659 4.796 5.48a1 1 0 0 0 1.506 0l4.796-5.48c.566-.647.106-1.659-.753-1.659H3.204a1 1 0 0 0-.753 1.659z" />
              </svg>
            </kbd>
            to navigate
          </span>
          <span>
            <kbd>
              <svg
                xmlns="http://www.w3.org/2000/svg"
                width="12"
                height="12"
                fill="currentColor"
                style="display:inline-block;"
                viewBox="0 0 16 16">
                <path
                  fill-rule="evenodd"
                  d="M14.5 1.5a.5.5 0 0 1 .5.5v4.8a2.5 2.5 0 0 1-2.5 2.5H2.707l3.347 3.346a.5.5 0 0 1-.708.708l-4.2-4.2a.5.5 0 0 1 0-.708l4-4a.5.5 0 1 1 .708.708L2.707 8.3H12.5A1.5 1.5 0 0 0 14 6.8V2a.5.5 0 0 1 .5-.5z" />
              </svg>
            </kbd>
            to select
          </span>
          <span class="search-result-info"></span>
          <span data-target="close-search-modal">
            <kbd>ESC</kbd> to close
          </span>
        </div>
      </div>
    </div>
  




    <main>
      
  <section>
  <div class="container text-center">
    <div
      class="from-body to-theme-light dark:from-darkmode-body dark:to-darkmode-theme-light rounded-2xl bg-gradient-to-b px-8 py-14">
      <h1>Configuración NAT en Routers Cisco en GNS3</h1>
      




<ul class="mt-6 inline-flex space-x-1 capitalize">
  <li>
    <a class="text-primary dark:text-darkmode-primary" href="//localhost:1313/">
      Home
    </a>
    <span class="inlin-block mr-1">/</span>
  </li>
  
    
  
    
      <li>
        <a
          class="text-primary dark:text-darkmode-primary"
          href="/spanish/">
          
        </a>
        <span class="inlin-block mr-1">/</span>
      </li>
    
  
    
      <li>
        <a
          class="text-primary dark:text-darkmode-primary"
          href="/spanish/blog/">
          Blog de prácticas
        </a>
        <span class="inlin-block mr-1">/</span>
      </li>
    
  
  <li>
    <span class="text-primary dark:text-darkmode-primary">
      Configuración NAT en routers Cisco en GNS3
    </span>
  </li>
</ul>

    </div>
  </div>
</section>



  <section class="section-sm">
    <div class="container">
      <div class="row justify-center">
        <div class="lg:col-10">
          <div class="content">
            <p>NAT (Network Address Translation o traducción de direcciones de red) es un mecanismo que consiste en modificar la información de direccionamiento en los paquetes IP que atraviesan un router. Es necesario para convertir las direcciones IP de las cabecera de los paquetes que salen de la red local o llegan a ella de privadas a públicas y viceversa. En este post se muestra, a través de un caso práctico, cómo se configura este mecanismo en <a href="/blog/redes/2024-01-28-importar-dispositivos-GNS3"



 


>routers Cisco simulados en GNS3</a>.</p>
<p>Se usa el siguiente escenario que incluye un <a href="/blog/redes/2024-03-03-simular-servidor-web-gns3-nginx-apache"



 


>servidor web</a>, un <a href="/blog/redes/2024-03-24-simular-servidor-postgresql-gns3"



 


>servidor PostgreSQL</a>, un <a href="/blog/redes/2024-03-24-simular-servidor-mariadb-gns3"



 


>servidor MariaDB</a> y un servidor SSH. Además, el router Casa tiene configurado un <a href="/blog/redes/2024-03-24-configurar-servidor-dhcp-router-cisco-gns3"



 


>servidor DHCP</a>:</p>

















  





  
  
  


  
  
    
    
      
    

    


    
    


    
    
    
    
      
      
    
    
    
    


    
    
      
      

      
        
        
      


      

      
      
        
        
        
      
      
      
      

    
    

    
    
      
      
          <img
            title=""
            loading="lazy"
            decoding="async"
            class="img img-fluid img-center"
            width="902"
            height="600"
            src="/images/redes/practica13/img1_hu16336523051638233059.png"
            alt=""
            onerror="this.onerror='null';this.src='\/images\/redes\/practica13\/img1_hu16336523051638233059.png'" />
      
    

  
  






  <script>
    window.addEventListener("load", (e) => {
      const lightbox = GLightbox();
    });
  </script>


<p>El direccionamiento de los dispositivos es el siguiente:</p>
<ul>
<li>Ordenadores:
<ul>
<li>PC1: DHCP</li>
<li>PC2: DHCP</li>
<li>Servidor 1: 10.0.0.2/24</li>
<li>Servidor 2: 10.0.0.3/24</li>
<li>Servidor 3: 10.0.0.2/24</li>
<li>Servidor 4: 10.0.0.3/24</li>
</ul>
</li>
<li>Routers:
<ul>
<li>Empresa 1 f0/0: 10.0.0.1/24</li>
<li>Empresa 1 f1/0: 100.10.0.1/24</li>
<li>Empresa 2 f0/0: 10.0.0.1/24</li>
<li>Empresa 2 f1/0: 100.20.0.1/24</li>
<li>Internet 1 f0/0: 100.10.0.2/24</li>
<li>Internet 1 f1/0: 100.20.0.2/24</li>
<li>Internet 1 f1/1: 100.30.0.1/24</li>
<li>Internet 2 f0/0: 100.30.0.2/24</li>
<li>Internet 2 f1/0: 100.40.0.1/24</li>
<li>Casa f0/0: 100.40.0.2/24</li>
<li>Casa f1/0: 192.168.0.1/24</li>
</ul>
</li>
</ul>
<h1 id="enrutamiento-del-escenario">Enrutamiento del escenario</h1>
<h2 id="tablas-de-enrutamiento">Tablas de enrutamiento</h2>
<h3 id="empresa-1">Empresa 1</h3>
<table>
  <thead>
      <tr>
          <th>Destino</th>
          <th>Siguiente router</th>
          <th>Interfaz de salida</th>
      </tr>
  </thead>
  <tbody>
      <tr>
          <td>10.0.0.0/24</td>
          <td>0.0.0.0</td>
          <td>f0/0</td>
      </tr>
      <tr>
          <td>100.10.0.0/24</td>
          <td>0.0.0.0</td>
          <td>f1/0</td>
      </tr>
      <tr>
          <td>0.0.0.0</td>
          <td>100.10.0.2</td>
          <td>f1/0</td>
      </tr>
  </tbody>
</table>
<h3 id="empresa-2">Empresa 2</h3>
<table>
  <thead>
      <tr>
          <th>Destino</th>
          <th>Siguiente router</th>
          <th>Interfaz de salida</th>
      </tr>
  </thead>
  <tbody>
      <tr>
          <td>10.0.0.0/24</td>
          <td>0.0.0.0</td>
          <td>f0/0</td>
      </tr>
      <tr>
          <td>100.20.0.0/24</td>
          <td>0.0.0.0</td>
          <td>f1/0</td>
      </tr>
      <tr>
          <td>0.0.0.0</td>
          <td>100.20.0.2</td>
          <td>f1/0</td>
      </tr>
  </tbody>
</table>
<h3 id="casa">Casa</h3>
<table>
  <thead>
      <tr>
          <th>Destino</th>
          <th>Siguiente router</th>
          <th>Interfaz de salida</th>
      </tr>
  </thead>
  <tbody>
      <tr>
          <td>192.168.0.0/24</td>
          <td>0.0.0.0</td>
          <td>f1/0</td>
      </tr>
      <tr>
          <td>100.40.0.0/24</td>
          <td>0.0.0.0</td>
          <td>f0/0</td>
      </tr>
      <tr>
          <td>0.0.0.0</td>
          <td>100.40.0.1</td>
          <td>f0/0</td>
      </tr>
  </tbody>
</table>
<h3 id="internet-1">Internet 1</h3>
<table>
  <thead>
      <tr>
          <th>Destino</th>
          <th>Siguiente router</th>
          <th>Interfaz de salida</th>
      </tr>
  </thead>
  <tbody>
      <tr>
          <td>100.10.0.0/24</td>
          <td>0.0.0.0</td>
          <td>f0/0</td>
      </tr>
      <tr>
          <td>100.20.0.0/24</td>
          <td>0.0.0.0</td>
          <td>f1/0</td>
      </tr>
      <tr>
          <td>100.30.0.0/24</td>
          <td>0.0.0.0</td>
          <td>f1/1</td>
      </tr>
      <tr>
          <td>100.40.0.0/24</td>
          <td>100.30.0.2</td>
          <td>f1/1</td>
      </tr>
  </tbody>
</table>
<h3 id="internet-2">Internet 2</h3>
<table>
  <thead>
      <tr>
          <th>Destino</th>
          <th>Siguiente router</th>
          <th>Interfaz de salida</th>
      </tr>
  </thead>
  <tbody>
      <tr>
          <td>100.30.0.0/24</td>
          <td>0.0.0.0</td>
          <td>f0/0</td>
      </tr>
      <tr>
          <td>100.40.0.0/24</td>
          <td>0.0.0.0</td>
          <td>f1/0</td>
      </tr>
      <tr>
          <td>0.0.0.0</td>
          <td>100.30.0.1</td>
          <td>f0/0</td>
      </tr>
  </tbody>
</table>
<h2 id="asginar-el-direccionamiento-en-los-routers-cisco">Asginar el direccionamiento en los routers Cisco</h2>
<p>Para asignar el direccionamiento a cada interfaz de cara router se usa el comando <code>ip address</code> desde el modo <code>config terminal</code>:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash-session" data-lang="bash-session"><span style="display:flex;"><span>Empresa1#conf t
</span></span><span style="display:flex;"><span>Empresa1(config)#interface fastEthernet 0/0
</span></span><span style="display:flex;"><span>Empresa1(config-if)#ip address 10.0.0.1 255.255.255.0
</span></span><span style="display:flex;"><span>Empresa1(config-if)#no shutdown
</span></span><span style="display:flex;"><span>Empresa1(config-if)#exit
</span></span><span style="display:flex;"><span>Empresa1(config)#interface fastEthernet 1/0
</span></span><span style="display:flex;"><span>Empresa1(config-if)#ip address 100.10.0.1 255.255.255.0
</span></span><span style="display:flex;"><span>Empresa1(config-if)#no shutdown
</span></span><span style="display:flex;"><span>Empresa1(config-if)#end
</span></span><span style="display:flex;"><span>Empresa1#wr
</span></span></code></pre></div><h2 id="configurar-el-enrutamiento-en-los-routers-cisco">Configurar el enrutamiento en los routers Cisco</h2>
<p>Para configurar las tablas de enrutamiento en los router Cisco se usa el comando <code>ip route</code> desde el modo <code>config</code>.</p>
<h3 id="empresa-1-1">Empresa 1</h3>
<p>En el router Empresa1 hay que añadir a la tabla de enrutamiento la entrada por defecto</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash-session" data-lang="bash-session"><span style="display:flex;"><span>Empresa1#conf t
</span></span><span style="display:flex;"><span>Empresa1(config)#ip route 0.0.0.0 0.0.0.0 100.10.0.2
</span></span><span style="display:flex;"><span>Empresa1(config)#end
</span></span><span style="display:flex;"><span>Empresa1#wr
</span></span></code></pre></div><h3 id="empresa-2-1">Empresa 2</h3>
<p>En el router Empresa2 también es necesario añadir únicamente la entrada por defecto.</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash-session" data-lang="bash-session"><span style="display:flex;"><span>Empresa2#conf t
</span></span><span style="display:flex;"><span>Empresa2(config)#ip route 0.0.0.0 0.0.0.0 100.20.0.2
</span></span><span style="display:flex;"><span>Empresa2(config)#end
</span></span><span style="display:flex;"><span>Empresa2#wr
</span></span></code></pre></div><h3 id="casa-1">Casa</h3>
<p>Y en el caso del router casa también es necesario indicar cuál es la salida por defecto del tráfico de su red local.</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash-session" data-lang="bash-session"><span style="display:flex;"><span>Casa#conf t
</span></span><span style="display:flex;"><span>Casa(config)#ip route 0.0.0.0 0.0.0.0 100.40.0.1
</span></span><span style="display:flex;"><span>Casa(config)#end
</span></span><span style="display:flex;"><span>Casa#wr
</span></span></code></pre></div><h3 id="internet-1-1">Internet 1</h3>
<p>Para el router Internet1, que en este escenario no necesita incluir una entrada por defecto en su tabla de enrutamiento, es necesario añadir manualmente la información de enrutamiento de los paquetes con destino a la red 100.40.0.0/24, al a que no está conectado directamente.</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash-session" data-lang="bash-session"><span style="display:flex;"><span>Internet1#conf t
</span></span><span style="display:flex;"><span>Internet1(config)#ip route 100.40.0.0 255.255.255.0 100.30.0.2
</span></span><span style="display:flex;"><span>Internet1(config)#end
</span></span><span style="display:flex;"><span>Internet1#wr
</span></span></code></pre></div><h3 id="internet-2-1">Internet 2</h3>
<p>En este escenario, el router Internet2 sí puede usar una entrada por defecto en su tabla de enrutamiento.</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash-session" data-lang="bash-session"><span style="display:flex;"><span>Internet2#conf t
</span></span><span style="display:flex;"><span>Internet2(config)#ip route 0.0.0.0 0.0.0.0 100.30.0.1
</span></span><span style="display:flex;"><span>Internet2(config)#end
</span></span><span style="display:flex;"><span>Internet2#wr
</span></span></code></pre></div><h1 id="configuración-del-snat-en-el-router-casa">Configuración del SNAT en el router Casa</h1>
<p>Para configurar SNAT en un router Cisco como Casa el primer paso es crear una ACL para definir el tráfico sobre el que se hará NAT. En este caso, será todo el tráfico procedente de la red local a la que está conectado el router independientemente de cuál sea su destino.</p>
<p>A continuación se debe establecer el conjunto de direcciones públicas que el router puede asignar a los paquetes a la hora de hacer NAT. En este caso habrá que indicar la dirección pública estática del router: 100.40.0.2. El siguiente paso es activar el NAT con el comando <code>ip nat inside source list &lt;n&gt; pool &lt;nombre&gt; overload</code> y el último paso es activar el NAT en cada una de las interfaces involucradas.</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash-session" data-lang="bash-session"><span style="display:flex;"><span>Casa#conf t
</span></span><span style="display:flex;"><span>Casa(config)#access-list 1 permit any
</span></span><span style="display:flex;"><span>Casa(config)#ip nat pool CASA-PUBLICA 100.40.0.2 100.40.0.2 netmask 255.255.255.0
</span></span><span style="display:flex;"><span>Casa(config)#ip nat inside source list 1 pool CASA-PÚBLICA overload
</span></span><span style="display:flex;"><span>Casa(config)#interface fastEthernet 0/0
</span></span><span style="display:flex;"><span>Casa(config-if)#ip nat oustide
</span></span><span style="display:flex;"><span>Casa(config-if)#exit
</span></span><span style="display:flex;"><span>Casa(config)#interface fastEthernet 1/0
</span></span><span style="display:flex;"><span>Casa(config-if)#ip nat inside
</span></span><span style="display:flex;"><span>Casa(config-if)#end
</span></span><span style="display:flex;"><span>Casa#wr
</span></span></code></pre></div><h1 id="configuración-del-nat-en-los-routers-de-las-empresas">Configuración del NAT en los routers de las empresas</h1>
<h2 id="configuración-del-dnat-en-los-routers-de-las-empresas">Configuración del DNAT en los routers de las empresas</h2>
<p>Configurar el DNAT en los routers Cisco es algo más sencillo. Sólo es necesario ejecutar en ellos un comando en el que se debe indicar la IP privada y el puerto al que se deben dirigir las peticiones que lleguen a una determinada IP pública con un determinado puerto de destino.</p>
<p>Así, se deben indicar las órdenes para redirigir los mensajes que lleguen al router Empresa1 hacia el servidor web para el tráfico http y también para el tráfico https y para el servidor PostgreSQL.</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash-session" data-lang="bash-session"><span style="display:flex;"><span>Empresa1#conf t
</span></span><span style="display:flex;"><span>Empresa1(config)#ip nat inside source static tcp 10.0.0.2 80 100.10.0.1 80
</span></span><span style="display:flex;"><span>Empresa1(config)#ip nat inside source static tcp 10.0.0.2 443 100.10.0.1 443
</span></span><span style="display:flex;"><span>Empresa1(config)#ip nat inside source static tcp 10.0.0.3 5432 100.10.0.1 5432
</span></span><span style="display:flex;"><span>Empresa1(config)#end
</span></span><span style="display:flex;"><span>Empresa1#wr
</span></span></code></pre></div><p>En el router Empresa2 también hay que aplicar el DNAT para dirigir hacia el servidor SSH el tráfico de este tipo y hacia el servidor MariaDB el que sea necesario.</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash-session" data-lang="bash-session"><span style="display:flex;"><span>Empresa2#conf t
</span></span><span style="display:flex;"><span>Empresa2(config)#ip nat inside source static tcp 10.0.0.2 22 100.20.0.1 22
</span></span><span style="display:flex;"><span>Empresa2(config)#ip nat inside source static tcp 10.0.0.3 3306 100.20.0.1 3306
</span></span><span style="display:flex;"><span>Empresa2(config)#end
</span></span><span style="display:flex;"><span>Empresa2#wr
</span></span></code></pre></div><h2 id="configuración-del-snat-en-los-routers-de-las-empresas">Configuración del SNAT en los routers de las empresas</h2>
<p>Para configurar el SNAT en estos routers se deben seguir los mismos pasos que en el caso del router Casa. En primer lugar se debe crear la ACL que, en estos dos routers, también debe permitir todo el tráfico de la red local independientemente de cuál sea su destino. Posteriormente, se crea el pool de direcciones públicas que el router puede asignar como IP de origen a los paquetes.  A continuación será necesario activar el NAT.</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash-session" data-lang="bash-session"><span style="display:flex;"><span>Empresa1#conf t
</span></span><span style="display:flex;"><span>Empresa1(config)#access-list 1 permit any
</span></span><span style="display:flex;"><span>Empresa1(config)#ip nat pool EMPRESA1 100.10.0.1 100.10.0.1 netmask 255.255.255.0
</span></span><span style="display:flex;"><span>Empresa1(config)#ip nat inside source list 1 pool EMPRESA1 overload
</span></span><span style="display:flex;"><span>Empresa1(config)#end
</span></span><span style="display:flex;"><span>Empresa1#wr
</span></span></code></pre></div><div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash-session" data-lang="bash-session"><span style="display:flex;"><span>Empresa2#conf t
</span></span><span style="display:flex;"><span>Empresa2(config)#access-list 1 permit any
</span></span><span style="display:flex;"><span>Empresa2(config)#ip nat pool EMPRESA2 100.20.0.1 100.20.0.1 netmask 255.255.255.0
</span></span><span style="display:flex;"><span>Empresa2(config)#ip nat inside source list 1 pool EMPRESA2 overload
</span></span><span style="display:flex;"><span>Empresa2(config)#end
</span></span><span style="display:flex;"><span>Empresa2#wr
</span></span></code></pre></div><p>Finalmente, con los comandos <code>ip nat inside</code> e <code>ip nat outside</code> se indicará en cada router cuál es la interfaz de entrada y de salida para el NAT.</p>



  





  


<div class="notice note">
  <div class="notice-head"><svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" width="22" height="22" stroke-width="1.5" stroke="currentColor">
        <path stroke-linecap="round" stroke-linejoin="round" d="m16.862 4.487 1.687-1.688a1.875 1.875 0 1 1 2.652 2.652L6.832 19.82a4.5 4.5 0 0 1-1.897 1.13l-2.685.8.8-2.685a4.5 4.5 0 0 1 1.13-1.897L16.863 4.487Zm0 0L19.5 7.125" />
      </svg><p>Note</p>
  </div>
  <div class="notice-body"><p>En este blog también puedes encontrar este mismo caso práactico resuelto usando <a href="/blog/redes/2024-03-25-nat-router-linux-openstack"



 


>routers Linux</a> y <a href="/blog/redes/2024-03-25-nat-router-mikrotik-openstak"



 


>routers Mikrotik</a> en Openstack.</p></div>
</div>


          </div>
        </div>
      </div>
    </div>
  </section>

    </main>

    
    <footer class="bg-theme-light dark:bg-darkmode-theme-light">
  <div class="container">
    <div class="row items-center py-10">
      <div class="lg:col-3 mb-8 text-center lg:mb-0 lg:text-left">
        
        <a
          class="navbar-brand inline-block"
          href="/">
          















  









  
  
  


  
  
    
    
  


  
  
      
      
    
    
    
    
    
    
  
  

  
  
    
    
      
      


      
      
        
        
        
        

        
        
        
      
      
    
  
  

  
    <img
      fetchpriority="high"
      decoding="async"
      class="img img-light"
      width="160"
      height="32"
      src="/images/logo_hu4114262549785978686.webp"
      alt="Javi Huete"
      onerror="this.onerror=null;this.src='\/images\/logo_hu7137767845088484273.png';" />

    <img
      fetchpriority="high"
      decoding="async"
      class="img img-dark"
      width="160"
      height="32"
      src="/images/logo-darkmode_hu8742296558546396051.webp"
      alt="Javi Huete"
      onerror="this.onerror=null;this.src='\/images\/logo-darkmode_hu4471933895487503573.png';" />
  
  


        </a>
      </div>
      <div class="lg:col-6 mb-8 text-center lg:mb-0">
        <ul>
          
        </ul>
      </div>
      <div class="lg:col-3 mb-8 text-center lg:mb-0 lg:mt-0 lg:text-right">
        <ul class="social-icons">
          
            <li>
              <a
                target="_blank"
                aria-label="email"
                rel="nofollow noopener"
                href="mailto:fjhuete.m@gmail.com">
                <i class="fa-solid fa-envelope"></i>
              </a>
            </li>
          
            <li>
              <a
                target="_blank"
                aria-label="github"
                rel="nofollow noopener"
                href="https://www.github.com/fjhuete">
                <i class="fab fa-github"></i>
              </a>
            </li>
          
            <li>
              <a
                target="_blank"
                aria-label="linkedin"
                rel="nofollow noopener"
                href="https://www.linkedin.com/in/fjhuete">
                <i class="fab fa-linkedin"></i>
              </a>
            </li>
          
            <li>
              <a
                target="_blank"
                aria-label="telegram"
                rel="nofollow noopener"
                href="https://t.me/fj_huete">
                <i class="fab fa-telegram"></i>
              </a>
            </li>
          
        </ul>
      </div>
    </div>
  </div>
  <div class="border-border dark:border-darkmode-border border-t py-7">
    <div class="text-light dark:text-darkmode-light container text-center">
      <p>
        Designed &amp; Developed by <a href="https://zeon.studio"




 target="_blank"
 


>Zeon Studio</a>
      </p>
    </div>
  </div>
</footer>



    
    



  
    
      
    
  

  
    
      
    
  

  
    
      
    
  

  
    
      
    
  

  
    
      
    
  

  
    
      
    
  

  
    
      
    
  

  
    
      
    
  

  
    
      
    
  












<script
  crossorigin="anonymous"
  integrity=""
  src="/js/script.js"></script>


<script
  defer
  async
  crossorigin="anonymous"
  integrity=""
  src="/js/script-lazy.js"></script>



<script>
  if ('serviceWorker' in navigator){navigator.serviceWorker.register("/service-worker.js");}
</script>






  












  



  </body>
</html>
